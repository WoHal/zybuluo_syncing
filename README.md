# GitHub项目同步工具

这是一个Tampermonkey脚本，用于在作业部落(zybuluo.com)网站中添加悬浮按钮，方便设置GitHub项目地址和API Token，并自动将笔记同步到GitHub仓库。

## 功能

- 在网页右下角添加悬浮按钮组，包含"开始同步"、"同步设置"和"全部导出"三个按钮
- 点击"开始同步"按钮立即将当前笔记同步到GitHub，按钮会显示同步状态
- 点击"同步设置"按钮弹出设置对话框
- 点击"全部导出"按钮下载所有Markdown文件，按钮会显示导出状态
- 操作进行中的按钮会变灰并显示进度，完成后短暂显示结果状态
- 可以设置GitHub项目地址、分支名称和API Token
- 本地保存设置信息
- 支持创建新文件和更新现有文件

## 安装步骤

1. 首先确保你的浏览器已安装Tampermonkey扩展
   - Chrome: [Tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)
   - Firefox: [Tampermonkey](https://addons.mozilla.org/en-US/firefox/addon/tampermonkey/)

2. 安装脚本
   - 打开Tampermonkey扩展
   - 点击"添加新脚本"
   - 将`src/tampermonkey-script.js`中的内容复制粘贴到编辑器中
   - 保存脚本

## 使用方法

1. 访问作业部落(zybuluo.com)网站，右下角会出现按钮组，包含"开始同步"、"同步设置"和"全部导出"三个按钮
2. 点击"同步设置"按钮，弹出设置对话框
3. 填写GitHub项目地址、分支名称（默认为main）和API Token
4. 点击"保存设置"按钮保存信息
5. 设置完成后，点击"开始同步"按钮，立即将当前笔记同步到GitHub
   - 同步开始时，按钮会变为灰色并显示"同步中..."
   - 同步成功后，按钮会短暂变为绿色并显示"同步成功"
   - 同步失败时，按钮会短暂变为红色并显示"同步失败"
   - 操作完成后，按钮会自动恢复原状态
   - 同步过程中，按钮不可再次点击，防止重复操作
6. 同步过程中：
   - 如果GitHub仓库中已存在同名文件，会使用差异补丁更新文件
   - 如果文件不存在，会创建新文件
7. 如需下载所有Markdown文件，点击"全部导出"按钮，系统会将所有笔记打包成zip文件并下载
   - 导出开始时，按钮会变为灰色并显示"导出中..."
   - 导出成功后，按钮会短暂变为绿色并显示"导出成功"
   - 导出失败时，按钮会短暂变为红色并显示"导出失败"
   - 操作完成后，按钮会自动恢复原状态
   - 导出过程中，按钮不可再次点击，防止重复操作

## 注意事项

- API Token会以加密形式存储在本地
- 脚本仅在作业部落(zybuluo.com)网站上运行
- GitHub API Token需要有repo权限，以便能够读取和写入仓库内容
- 同步时使用的文件名为笔记标题加.md后缀
- 确保GitHub仓库中的文件编码为UTF-8，以避免编码问题
- 如果不设置分支名称，默认使用main分支
- 确保指定的分支在GitHub仓库中已存在